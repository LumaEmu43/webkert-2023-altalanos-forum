<div class="container">
  <div class="side-bar"></div>
  <div class="middle">
    <ng-template ngFor let-post [ngForOf]="posts" let-i="index">
      <mat-card class="topic">
        <mat-card-header>
          <mat-card-title>{{posts[i].title}}</mat-card-title>
        </mat-card-header>
        <mat-card-subtitle>by {{posts[i].author}}</mat-card-subtitle>
        <mat-card-subtitle>Ekkor: {{posts[i].created}}</mat-card-subtitle>
        <mat-card-content>
          {{posts[i].content}}
        </mat-card-content>
        <mat-accordion style="margin: 2%; width: 80%;">
          <mat-expansion-panel hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Válaszok megtekintése:
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-card>
              <mat-card-subtitle style="margin: 1%">
                username
              </mat-card-subtitle>
              <mat-card-content>
                valami válasz
              </mat-card-content>
            </mat-card>

            <form [formGroup]="answerForm" (ngSubmit)="onAnswer()" *ngIf="loggedInUser">
              <mat-card>
                <div style="text-align: center;">
                  <mat-card-subtitle style="margin: 1%">
                    Válasz írása
                  </mat-card-subtitle>
                  <mat-card-content>
                    <mat-form-field>
                      <mat-label>Kezdd el írni a válaszodat...</mat-label>
                      <textarea matInput formControlName="content"></textarea>
                    </mat-form-field>
                  </mat-card-content>
                </div>
                <button mat-raised-button color="primary" type="submit">Válasz küldése</button>
              </mat-card>
            </form>

          </mat-expansion-panel>
        </mat-accordion>
      </mat-card>
    </ng-template>

    <form [formGroup]="postForm" (ngSubmit)="onSubmit()" *ngIf="loggedInUser">
      <mat-card class="topic">
        <mat-card-header>
          <mat-card-title>Új fórumbejegyzés</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-card-header>
            <mat-label>Cím:</mat-label>
          </mat-card-header>
          <div class="form-field">
            <mat-form-field>
              <input matInput formControlName="title">
            </mat-form-field>
          </div>
          <mat-card-header>
            <mat-label>Téma leírása:</mat-label>
          </mat-card-header>
          <div class="form-field">
            <mat-form-field>
              <mat-label>Kezdd el írni a válaszodat...</mat-label>
              <textarea matInput formControlName="content"></textarea>
            </mat-form-field>
          </div>
        </mat-card-content>
        <div class="form-actions" style="margin-bottom: 2%">
          <button mat-raised-button color="primary" type="submit">Új bejegyzés</button>
        </div>
      </mat-card>
    </form>
  </div>
  <div class="side-bar"></div>
</div>